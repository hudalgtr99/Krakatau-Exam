function backdrop(e,t){var n=document.querySelector(".backdrop");n.style.display="1"===e||"100"===e?"block":"none",n.style.pointerEvents="1"===t?"none":"all",n.style.zIndex=e}var reloadCont=document.getElementById("reloadCont"),noSoal=document.getElementById("nosoal"),noSoalTop=document.getElementById("nosoalTop");noSoal&&(noSoalTop.appendChild(noSoal),noSoal.style.display="block");var qlistShow=document.getElementById("qlistShow"),qlistTop=document.getElementById("qlistTop");qlistShow&&(qlistTop.appendChild(qlistShow),qlistShow.style.display="flex");var scrolLayer=document.getElementById("scrollayer");function menuOpen(){scrolLayer.setAttribute("class","slide-in-header"),backdrop("1")}function menuClose(){document.querySelector(".slide-in-header")&&(scrolLayer.setAttribute("class","slide-out-header"),backdrop("-1"))}var qlistContID=document.getElementById("qlistContID");function qlistOpen(){if("1"===localStorage.getItem("darkMode"))var e="darkCont";else e="";qlistContID.setAttribute("class","tcecontentbox qlistCont slide-in-qlist "+e),backdrop("1")}function qlistHide(){if("1"===localStorage.getItem("darkMode"))var e="darkCont";else e="";document.querySelector(".slide-in-qlist")&&(qlistContID.setAttribute("class","tcecontentbox qlistCont slide-out-qlist "+e),backdrop("-1"))}var langSelID=document.getElementById("langSelID");function langSelOpen(){langSelID.setAttribute("class","qlistCont slide-in-langsel"),backdrop("1")}function langSelHide(){document.querySelector(".slide-in-langsel")&&(langSelID.setAttribute("class","qlistCont slide-out-langsel"),backdrop("-1"))}var userInfoID=document.getElementById("userInfoID");function userInfoOpen(){userInfoID.setAttribute("class","qlistCont slide-in-userIID"),backdrop("1")}function userInfoHide(){document.querySelector(".slide-in-userIID")&&(userInfoID.setAttribute("class","qlistCont slide-out-userIID"),backdrop("-1"))}var testComment=document.querySelector(".testcomment");function commentOpen(){testComment.setAttribute("class","testcomment slide-in-comment"),backdrop("1")}function commentHide(){document.querySelector(".slide-in-comment")&&(testComment.setAttribute("class","testcomment slide-out-comment"),backdrop("-1"))}var h1_testpage=document.getElementById("h1_testpage"),infolinkCont=document.getElementById("infolinkCont"),nosoalCont=document.getElementById("nosoalCont"),iconsettings=document.getElementById("iconsettings");function qSettingToggle(e){"block"===infolinkCont.style.display?(infolinkCont.removeAttribute("style"),iconsettings.removeAttribute("style")):(iconsettings.style.color="var(--col-3)",iconsettings.style.background="var(--col-12)",infolinkCont.style.display="block",infolinkCont.style.opacity="0.95",infolinkCont.style.zIndex="1",infolinkCont.style.transition="opacity 0.2s ease-in-out 0s")}var imgProblem=document.getElementById("imgProblem");imgProblem&&imgProblem.addEventListener("click",function(){imgProblem.setAttribute("class","hidden")});var btn_uploadFile=document.getElementById("btn_uploadFile");function qNumUnsureStyle(){noSoal.style.color="#343a40",noSoal.style.background="#ffcc00",noSoal.style.textShadow="none"}btn_uploadFile&&btn_uploadFile.addEventListener("click",function(){imgProblem.removeAttribute("class")});var fTestForm=document.getElementById("testform");function addUnsure(){if(fTestForm){let e;(e=null===localStorage.getItem("unsure")?[]:JSON.parse(localStorage.getItem("unsure"))).push(window.noSoalIndex),localStorage.setItem("unsure",JSON.stringify(e))}}function removeUnsure(){if(fTestForm){var e=window.noSoalIndex;let n;n=null===localStorage.getItem("unsure")?[]:JSON.parse(localStorage.getItem("unsure"));for(var t=0;t<n.length;)n[t]===e?n.splice(t,1):t++;localStorage.setItem("unsure",JSON.stringify(n))}}function setUnsureLiBg(e){document.querySelectorAll("ol.qlist li")[e].firstElementChild.style.setProperty("background-image","linear-gradient(45deg, transparent 2.5em, #ffcc00 2.5em)","important")}function resetUnsureLiBg(e){document.querySelectorAll("ol.qlist li")[e].firstElementChild.removeAttribute("style")}fTestForm||(document.getElementById("utilTop").style.display="none");var lblUnsure=document.getElementById("lblUnsure");function unsureToggler(e){if(localStorage.getItem("unsure")&&fTestForm){const t=JSON.parse(localStorage.getItem("unsure"));t.forEach(e=>{setUnsureLiBg(e)}),-1!==t.indexOf(e)?(qNumUnsureStyle(),cbUnsure.setAttribute("checked","checked")):(noSoal.setAttribute("style","display:block"),cbUnsure.removeAttribute("checked")),cbUnsure.removeAttribute("style")}}function markUnsure(e){e.checked?(qNumUnsureStyle(),addUnsure(),setUnsureLiBg(window.noSoalIndex)):(noSoal.setAttribute("style","display:block"),removeUnsure(),resetUnsureLiBg(window.noSoalIndex))}var h_fileAction=document.getElementById("h_fileAction"),c_fileAction=document.getElementById("c_fileAction");function clearUnsure(){localStorage.setItem("unsure","[]")}h_fileAction&&h_fileAction.addEventListener("click",function(){"block"===c_fileAction.style.display?c_fileAction.style.display="none":c_fileAction.style.display="block"}),fTestForm&&(localStorage.getItem("darkMode")||localStorage.setItem("darkMode","0"));var h1_testpageLink=document.querySelector("#h1_testpage a"),questionBlock=document.querySelector(".question-block"),navLink=document.querySelector(".navlink"),header=document.querySelector(".header"),lightModeBtn=document.getElementById("lightModeBtn"),darkModeBtn=document.getElementById("darkModeBtn"),forceterminateCont=document.getElementById("forceterminateCont"),utilTop=document.getElementById("utilTop");function darkMode(){fTestForm&&(fTestForm.style.setProperty("background","var(--col-11)","important"),document.body.style.background="var(--col-11)",questionBlock.style.color="var(--col-7)",questionBlock.style.background="var(--col-6)",header.style.background="var(--col-11)",navLink.style.background="var(--col-11)",utilTop.style.background="var(--col-6)",h1_testpageLink.className="darkCont",infolinkCont.className="darkCont",utilTop.style.color="var(--col-7)",forceterminateCont.style.background="var(--col-11)",darkModeBtn.style.display="none",lightModeBtn.style.display="flex",localStorage.setItem("darkMode","1"))}function lightMode(){fTestForm&&(document.body.removeAttribute("style"),questionBlock.removeAttribute("style"),header.removeAttribute("style"),navLink.removeAttribute("style"),fTestForm.removeAttribute("style"),h1_testpageLink.removeAttribute("class"),infolinkCont.removeAttribute("class"),utilTop.removeAttribute("style"),forceterminateCont.removeAttribute("style"),darkModeBtn.style.display="flex",lightModeBtn.style.display="none",localStorage.setItem("darkMode","0"))}if(fTestForm){var lsDarkMode=localStorage.getItem("darkMode");lsDarkMode&&("1"===lsDarkMode?(document.getElementById("darkModeBtn").style.display="none",document.getElementById("lightModeBtn").style.display="block",darkMode()):(document.getElementById("darkModeBtn").style.display="block",document.getElementById("lightModeBtn").style.display="none",lightMode()))}if(fTestForm){var lsFontSize=localStorage.getItem("fontSize");lsFontSize&&(document.querySelector(".tcecontentbox").style.fontSize=lsFontSize+"px",document.querySelector(".answer")&&(document.querySelector(".answer").style.fontSize=lsFontSize+"px"))}function zoomintext(){if(fTestForm){var e=parseFloat(window.getComputedStyle(document.querySelector(".tcecontentbox")).fontSize);newfontSize=1.1*e,document.querySelector(".tcecontentbox").style.fontSize=newfontSize+"px",document.querySelector(".answer")&&(document.querySelector(".answer").style.fontSize=newfontSize+"px"),fontSize=newfontSize,localStorage.setItem("fontSize",fontSize)}}function zoomouttext(){if(fTestForm){var e=parseFloat(window.getComputedStyle(document.querySelector(".tcecontentbox")).fontSize);newfontSize=e/1.1,document.querySelector(".tcecontentbox").style.fontSize=newfontSize+"px",document.querySelector(".answer")&&(document.querySelector(".answer").style.fontSize=newfontSize+"px"),fontSize=newfontSize,localStorage.setItem("fontSize",fontSize)}}var showPass=document.getElementById("showPass"),hidePass=document.getElementById("hidePass"),xuser_password=document.getElementById("xuser_password");function FormChanges(e){if("string"==typeof e&&(e=document.getElementById(e)),!e||!e.nodeName||"form"!=e.nodeName.toLowerCase())return null;for(var t,n,o,l,s,i,d=[],r=0,a=e.elements.length;r<a;r++){if(n=!1,"cbUnsure"!==(t=e.elements[r]).id)switch(t.nodeName.toLowerCase()){case"select":for(o=0,l=0,s=t.options.length;l<s;l++)i=t.options[l],n=n||i.selected!=i.defaultSelected,i.defaultSelected&&(o=l);n&&!t.multiple&&(n=o!=t.selectedIndex);break;case"textarea":case"input":switch(t.type.toLowerCase()){case"checkbox":case"radio":n=t.checked!=t.defaultChecked;break;default:n=t.value!=t.defaultValue}}n&&d.push(t)}return d}function DetectChanges(e){return FormChanges(e).length}function loadWYSIBB(){var e=document.createElement("link");if(document.getElementById("wysibb-style")||(e.id="wysibb-style",e.rel="stylesheet",e.href="../../shared/jscripts/vendor/wysibb/theme/default/wbbtheme.css",document.head.appendChild(e)),!window.jQuery){var t=document.createElement("script");t.defer="defer",t.id="jquery",t.src="../../shared/jscripts/vendor/wysibb/jquery-1.11.0.min.js",t.onload=function(){var e=document.createElement("script");e.defer="defer",e.id="wysibb",e.src="../../shared/jscripts/vendor/wysibb/jquery.wysibb.min.js",e.onload=function(){$("#answertext");$("#answertext").wysibb(),$("#btn_uploadFileCont").show()},document.head.appendChild(e)},document.head.appendChild(t)}}showPass&&showPass.addEventListener("click",function(){showPass.style.display="none",hidePass.style.display="block",xuser_password.setAttribute("type","text")}),hidePass&&hidePass.addEventListener("click",function(){showPass.style.display="block",hidePass.style.display="none",xuser_password.setAttribute("type","password")});var firstQuestion=document.getElementById("first_question"),lastQuestion=document.getElementById("last_question"),testLogId=document.getElementById("testlogid"),prevBtn=document.getElementById("prevbtn"),nextBtn=document.getElementById("nextbtn");if(fTestForm)var noSoalLbl=document.getElementById("nosoal").textContent.replace(/\D/g,"");var fLogin=document.getElementById("form_login"),usernameField=document.getElementById("xuser_name"),usernameLbl=document.getElementById("xuser_nameLbl"),passwordField=document.getElementById("xuser_password"),passwordLbl=document.getElementById("xuser_passwordLbl");function btnVis(e,t,n){fTestForm&&(e.value===t.value?n.style.display="none":n.removeAttribute("style"),lastQuestion.value===t.value?nextBtn.setAttribute("onclick","saveAnswerAjax(0,this)"):nextBtn.setAttribute("onclick","if(navigator.onLine){saveAnswerAjax(1,this)}else{pageOffline()}"))}function dynNoSoal(e,t){fTestForm&&(t?(noSoalLbl=parseInt(t.value),document.getElementById("nosoal").textContent="#"+noSoalLbl):(noSoalLbl=parseInt(noSoalLbl)+e,document.getElementById("nosoal").textContent="#"+noSoalLbl),markLiSelected())}function loadDoc(){var e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==this.readyState&&200==this.status){let t=document.getElementById("close_btn");t&&t.click();var e=JSON.parse(this.responseText);document.body.insertAdjacentHTML("afterbegin","<div class='"+e[0]+"'><span>"+e[1]+"</span><span onclick='this.parentNode.style.display = \"none\"' id='close_btn'>×</span></div>"),"message"===e[0]&&location.reload()}},e.open("POST","index.php",!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send("logaction=login&xuser_name="+usernameField.value+"&xuser_password="+passwordField.value)}function saveAnswerAjax(e,t){document.getElementById("close_btn_offline")&&document.getElementById("page-offline").remove();var n=document.querySelectorAll("ol.qlist li")[noSoalLbl-1].firstChild.id;document.querySelector(".wysibb-texarea")&&$("#answertext").sync();var o=document.getElementById("testform"),l=new FormData(o);l.append("question-block","1"),l.append("save-answer","1");var s=DetectChanges("testform"),i=t.innerHTML;if(s>0){var d=noSoalLbl,r=localStorage.getItem("prev_ansrad_val"),a=(document.getElementById("testid").value,document.getElementById("testlogid").value,document.getElementById("testuser_id").value,document.getElementById("examtime").value,document.getElementById("finish").value,document.getElementById("display_time").value,document.getElementById("reaction_time").value,document.getElementById("csrf_token").value,new XMLHttpRequest);a.onreadystatechange=function(){1==this.readyState&&(document.getElementById(t.id).disabled="disabled",1e3===e?document.getElementById(n).innerHTML="<div class='anim-pulsate'><span class='icon-upload'></span></div>":document.getElementById(t.id).innerHTML="<div class='anim-pulsate'><span class='icon-upload'></span></div>"),4==this.readyState&&200==this.status&&(1e3===e?document.getElementById(n).innerHTML=d:document.getElementById(t.id).innerHTML=i,document.getElementById(t.id).removeAttribute("disabled"),999!==e&&loadQuestion(e,t),markLiAnswered(d,r),localStorage.setItem("answer_change","0"),btnVis(lastQuestion,testLogId,nextBtn),btnVis(firstQuestion,testLogId,prevBtn))},a.open("POST","tce_test_execute.php",!0),a.send(l)}else 999!==e&&loadQuestion(e,t)}function btnDis(e,t){1===t?document.getElementById(e).setAttribute("disabled","disabled"):document.getElementById(e).removeAttribute("disabled")}function markLiSelected(){for(var e=0;e<document.querySelectorAll("ol.qlist li").length;e++)document.querySelectorAll("ol.qlist li")[e].className="";liIndex=noSoalLbl-1,document.querySelectorAll("ol.qlist li")[liIndex].className+="terpilih";var t=document.querySelectorAll("ol.qlist li")[liIndex].firstChild;t.classList.contains("q_displayed")||(t.className+=" q_displayed"),backdrop("-1","0")}function markLiAnswered(e,t){prevIndex=e-1;var n=document.querySelectorAll("ol.qlist li")[prevIndex].firstChild,o=n.classList.contains("q_answered");n.classList.contains("q_notanswered")&&n.classList.replace("q_notanswered","q_answered"),o&&"0"===t&&n.classList.replace("q_answered","q_notanswered")}function pageOffline(){document.getElementById("close_btn_offline")&&document.getElementById("page-offline").remove(),document.body.insertAdjacentHTML("afterbegin","<div id='page-offline' class='error' style='z-index:100'><span>Can't continue. Offline? Please, check your network connection</span><span onclick='this.parentNode.style.display = &quot;none&quot;' id='close_btn_offline'>×</span></div>")}function loadQuestion(e,t){if(fTestForm){var n=t.innerHTML;localStorage.setItem("answer_change","0");var o=document.getElementById("testid").value;if(1e3!==e){var l=document.querySelectorAll("ol.qlist li")[noSoalLbl-1+e];l&&(document.getElementById("testlogid").value=l.firstChild.id)}else document.getElementById("testlogid").value=t.id;var s=document.getElementById("testlogid").value,i=document.getElementById("testuser_id").value,d=document.getElementById("examtime").value,r=document.getElementById("finish").value,a=document.getElementById("display_time").value,c=document.getElementById("reaction_time").value,u=document.getElementById("csrf_token").value,m=new XMLHttpRequest,y=document.getElementById("question-list");m.onreadystatechange=function(){if(1==this.readyState&&(0!==t&&(document.getElementById(t.id).innerHTML="<div class='anim-rotate'><span class='icon-spinner11'></span></div>",btnDis("relbtn",1),btnDis("prevbtn",1),btnDis("nextbtn",1),btnDis("savebtn",1)),1e3==e?(document.getElementById(t.id).innerHTML="<div class='anim-rotate'><span class='icon-spinner11'></span></div>",t.style.setProperty("color","currentColor"),y.style.pointerEvents="none",btnDis(t.id,1),btnDis("relbtn",1),btnDis("prevbtn",1),btnDis("nextbtn",1),btnDis("savebtn",1),reloadCont.style.display="block",backdrop("100","1")):(reloadCont.style.display="block",backdrop("1","1"))),4==this.readyState&&200==this.status){reloadCont.style.display="none",0!==t&&(document.getElementById(t.id).innerHTML=n),1e3===e&&(document.getElementById(t.id).innerHTML=n,y.removeAttribute("style"),t.removeAttribute("style"),btnDis(t.id,0)),this.responseText.length>0?document.getElementById("question-area").innerHTML=this.responseText:document.getElementById("question-area").innerHTML="No Test Data Found, <a href='index.php'><u>click here to back home</u> or reload this page by clicking <a onclick='location.reload()'>here</a>",1e3!==e?dynNoSoal(e):dynNoSoal(e,t),btnVis(firstQuestion,testLogId,prevBtn),btnVis(lastQuestion,testLogId,nextBtn),btnDis("relbtn",0),btnDis("prevbtn",0),btnDis("nextbtn",0),btnDis("savebtn",0);var o=document.getElementById("hiddenAnswerText");o&&(o=o.innerHTML);var l=document.getElementById("answertext");l&&(l.value=o);var s=document.getElementById("unsureCbCont");document.getElementById("cbUnsure");s.innerHTML='<input type="checkbox" id="cbUnsure" style="display:none" onchange="markUnsure(this)" />',window.noSoalIndex=document.getElementById("nosoal").textContent.replace(/\D/g,"")-1,unsureToggler(noSoalIndex),window.jQuery&&$("#answertext").wysibb()?($("#answertext").wysibb(),$("#btn_uploadFileCont").show()):console.log("no bb editor")}},m.open("POST","tce_test_execute.php",!0),m.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m.send("question-block&testid="+o+"&testlogid="+s+"&testuser_id="+i+"&examtime="+d+"&prevquestionid="+void 0+"&nextquestionid="+void 0+"&autonext="+void 0+"&finish="+r+"&display_time="+a+"&reaction_time="+c+"&csrf_token="+u)}}function qInfoBar(){infolinkCont.style.position="absolute",document.body.scrollTop>47||document.documentElement.scrollTop>47?(document.getElementById("utilTop").className="d-flex utilTopTest jc-sb fwrap scrolledFloat",document.getElementById("question-area").style.paddingTop="3.5em",infolinkCont.style.position="fixed"):(document.getElementById("utilTop").className="d-flex utilTopTest jc-sb fwrap",document.getElementById("question-area").style.paddingTop="1em")}btnVis(firstQuestion,testLogId,prevBtn),loadQuestion(0,0),window.onscroll=function(){fTestForm&&qInfoBar()};var elem=document.documentElement;function openFullScr(){elem.requestFullscreen?(elem.requestFullscreen(),document.getElementById("resScBtn").removeAttribute("style"),document.getElementById("fullScBtn").setAttribute("style","display:none")):elem.webkitRequestFullscreen?(elem.webkitRequestFullscreen(),document.getElementById("resScBtn").removeAttribute("style"),document.getElementById("fullScBtn").setAttribute("style","display:none")):elem.msRequestFullscreen&&(elem.msRequestFullscreen(),document.getElementById("resScBtn").removeAttribute("style"),document.getElementById("fullScBtn").setAttribute("style","display:none"))}function closeFullScr(){document.exitFullscreen?(document.exitFullscreen(),document.getElementById("fullScBtn").removeAttribute("style"),document.getElementById("resScBtn").setAttribute("style","display:none")):document.webkitExitFullscreen?(document.webkitExitFullscreen(),document.getElementById("fullScBtn").removeAttribute("style"),document.getElementById("resScBtn").setAttribute("style","display:none")):document.msExitFullscreen&&(document.msExitFullscreen(),document.getElementById("fullScBtn").removeAttribute("style"),document.getElementById("resScBtn").setAttribute("style","display:none"))}function floatingLabel(e,t){fLogin&&(e.value.length>0&&(t.style.transition="all 0.05s ease-in-out",t.style.opacity="1"),e.addEventListener("keyup",function(){e.value.length>0?(t.style.color="#343a40",t.style.fontSize="0.85em",t.style.top="-15px",t.style.left="0px",t.style.transition="all 0.15s ease-in-out"):(t.style.color="#999",t.style.fontSize="0.98em",t.style.top="7px",t.style.left="8px",t.style.transition="all 0.15s ease-in-out")}))}function drawerClose(){menuClose(),qlistHide(),langSelHide(),userInfoHide(),commentHide()}floatingLabel(usernameField,usernameLbl),floatingLabel(passwordField,passwordLbl);